<% layout("layouts/boilerplate.ejs") -%>

<div class="row">
  <div class="col-lg-8 mx-auto">
    <div class="text-center mb-4">
      <h3><i class="fas fa-edit me-2"></i>Edit Event</h3>
      <p class="text-muted">Update the event details below</p>
    </div>

    <form method="POST" action="/events/<%= event._id %>?_method=PUT" class="event-form needs-validation" novalidate>
      <div class="mb-3">
        <label for="name" class="form-label">
          <i class="fas fa-tag me-2"></i>Event Name
        </label>
        <input type="text" id="name" name="event[name]" class="form-control" value="<%= event.name %>" required>
        <div class="valid-feedback">Event Name Looks good!</div>
        <div class="invalid-feedback">Please provide an event name.</div>
      </div>

      <div class="mb-3">
        <label for="description" class="form-label">
          <i class="fas fa-align-left me-2"></i>Description
        </label>
        <textarea id="description" name="event[description]" class="form-control" rows="4" required><%= event.description %></textarea>
        <div class="invalid-feedback">Please provide a Short Description.</div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="date" class="form-label">
            <i class="fas fa-calendar me-2"></i>Date
          </label>
          <input type="date" id="date" name="event[date]" class="form-control" value="<%= event.date.toISOString().split('T')[0] %>" required>
          <div class="invalid-feedback">Please provide a Date.</div>
        </div>

        <div class="col-md-6 mb-3">
          <label for="venue" class="form-label">
            <i class="fas fa-map-marker-alt me-2"></i>Venue
          </label>
          <input type="text" id="venue" name="event[venue]" class="form-control" value="<%= event.venue %>" required>
          <div class="invalid-feedback">Please provide a Venue.</div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="category" class="form-label">
            <i class="fas fa-list me-2"></i>Category
          </label>
          <select id="category" name="event[category]" class="form-select" required>
            <option value="Technical" <%= event.category === 'Technical' ? 'selected' : '' %>>ðŸ’» Technical</option>
            <option value="Cultural" <%= event.category === 'Cultural' ? 'selected' : '' %>>ðŸŽ­ Cultural</option>
            <option value="Sports" <%= event.category === 'Sports' ? 'selected' : '' %>>âš½ Sports</option>
          </select>
          <div class="invalid-feedback">Please select a Category.</div>
        </div>

        <div class="col-md-6 mb-3">
          <label for="registrationFee" class="form-label">
            <i class="fas fa-rupee-sign me-2"></i>Registration Fee (â‚¹)
          </label>
          <input type="number" id="registrationFee" name="event[registrationFee]" class="form-control" value="<%= event.registrationFee %>" min="0" required>
          <div class="invalid-feedback">Please provide a valid Registration Fee.</div>
        </div>
      </div>

      <div class="mb-4">
        <label for="poster" class="form-label">
          <i class="fas fa-image me-2"></i>Poster URL
        </label>
        <input type="url" id="poster" name="event[poster]" class="form-control" value="<%= event.poster %>" required>
        <div class="invalid-feedback">Please provide a valid Poster URL.</div>
      </div>

      <div class="d-flex gap-3">
        <button type="submit" class="btn btn-warning flex-fill">
          <i class="fas fa-save me-2"></i>Update Event
        </button>
        <a href="/events/<%= event._id %>" class="btn btn-secondary">
          <i class="fas fa-times me-2"></i>Cancel
        </a>
      </div>
    </form>
  </div>
</div>